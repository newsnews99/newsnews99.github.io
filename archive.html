<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Federation Sun Archive</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400&display=swap" rel="stylesheet">
  <style>
html, body {
  margin: 0;
  font-family: 'Oswald', sans-serif;
  background: #1e1e1e;
  color: white;
  box-sizing: border-box;
  overflow-x: hidden;
}

  
body {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 0;
}
img { max-width: 100%; height: auto; display: block; }
.banner {
  position: static;
  top: 0; left: 0; right: 0;
  background: #1e1e1e;
  z-index: 1000;
}
.social-section {
  grid-area: social;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
}

.icons-subsection {
  display: flex;
  gap: 8px;
  align-items: center;
}
.icons-subsection img {
  height: 24px;
  width: auto;
}
.left-section {
  grid-area: logo;
  display: flex;
  justify-content: center;
}
.left-section img.logo {
  height: 53px;
  width: auto;
}
.center-section {
  grid-area: search;
  display: flex;
  justify-self: end;
  gap: 6px;
  max-width: 300px;
  width: 100%;
}
.center-section form {
  display: flex;
  width: 100%;
  gap: 6px;
}
.center-section input[type="text"] {
  flex: 1;
  height: 32px;
  padding: 4px 8px;
  font-size: 16px;
  border: none;
  border-radius: 4px;
  outline: none;
  background: #fff;
  color: #1e1e1e;
  box-sizing: border-box;
}
.center-section button {
  background-image: url('australian_flag.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  border: 1px solid white;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  padding: 0 12px;
  box-sizing: border-box;
  color: white;
  font-size: 16px;
  font-weight: bold;
  text-shadow:
    -1px -1px 0 #1e1e1e,
     1px -1px 0 #1e1e1e,
    -1px  1px 0 #1e1e1e,
     1px  1px 0 #1e1e1e;
}



.container {
  width: 100%;
  max-width: 1248px;
  margin: 0 auto;
}

.main-headline-layout {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 16px;
  padding: 0px 16px;
  align-items: start;
}
.main-headline-left {
  display: flex;
  flex-direction: column;
  gap: 10px;
  
}
.main-headline-img-wrapper {
  width: 100%;
}
.main-headline-img {
  width: 100%;
  height: auto;
}
.main-headline-link {
  font-family: 'Oswald', sans-serif;
  font-size: 28px;
  color: white;
  text-decoration: none;
  text-align: center;
}
.main-headline-link:hover {
  color: gold;
}
.two-columns-below {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}
.two-columns-below .column,
.right-column {
  display: grid;
  gap: 16px;
}
.two-columns-below .column > div.headline-item,
.right-column .headline-item {
  display: flex;
  flex-direction: row;
  gap: 10px;
  align-items: flex-start;
}
.two-columns-below img,
.right-column img {
  width: 33%;
  aspect-ratio: 16/9;
  object-fit: cover;
  flex-shrink: 0;
}
.two-columns-below a,
.right-column a {
  font-family: 'Oswald', sans-serif;
  line-height: 1.2;
}
.footer-wrapper {
  width: 100%;
  background: #1e1e1e;
  padding: 30px 0;
}
.footer-content {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  max-width: 1200px;
  margin: 0 auto;
  gap: 40px;
  flex-wrap: nowrap;
  text-align: left;
}
.footer-section {
  flex: 1 1 0;
  min-width: 0;
}
.footer-section.center {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}
.footer-section.left img {
  width: 33vw;
  margin-bottom: 10px;
}
.footer-section.center img {
  width: 120px;
  margin-bottom: 10px;
}
.footer-section.right {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  text-align: left;
}
.footer-section.right h3 {
  margin: 0 0 10px 0;
}
.footer-section.right form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
}
.footer-section.right textarea {
  width: 100%;
  min-height: 80px;
  padding: 8px;
  border: none;
  border-radius: 4px;
  resize: vertical;
  box-sizing: border-box;
}
.footer-separator {
  width: 100%;
  max-width: 1200px;
  margin: 40px auto 0 auto;
  border: none;
  border-top: 1px solid #444;
}
@media (max-width: 768px) {
  
  .social-section {
    grid-area: right;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    text-align: right;
    gap: 4px;
  }
  
  .left-section {
    grid-area: logo;
    justify-content: flex-start;
  }
  .center-section {
    grid-area: search;
    width: 100%;
    max-width: 100%;
  }
  .container,
  .main-headline-layout,
  .two-columns-below,
  .right-column,
  .footer-content,
  .footer-section,
  .footer-section.right form,
  .footer-section.right textarea {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
  .main-headline-layout {
    grid-template-columns: 1fr;
  }
  .two-columns-below {
    grid-template-columns: 1fr;
  }
  .footer-content {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  .footer-section {
    padding: 0 16px;
    max-width: 100%;
  }
  .footer-section.left img {
    width: 33vw;
    margin: 0 auto 10px auto;
  }
  .footer-section.left { order: 1; }
  .footer-section.right { order: 2; }
  .footer-section.center { order: 3; }
  .footer-section.right h3 {
    text-align: center;
    width: 100%;
  }
}



@keyframes ticker-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(calc(-1 * var(--ticker-distance)));
  }
}

/* Keep hover pause */
.ticker-inner:hover .ticker-track {
  animation-play-state: paused;
}

  
<style>
/* CONTINUATION OF YOUR CSS */

body,
body * {
  font-weight: normal !important;
}

/* Center the poll */
#poll-container {
  text-align: center;
}
#poll-container form {
  display: inline-block;
  text-align: left;
}

/* Make column 2 headlines align like other columns */
#more-headlines-list {
  display: grid;
  gap: 16px;
}
#more-headlines-list .headline-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}
/* Restore poll box */
#poll-container {
  text-align: center;
  background: #222;
  border: 1px solid #444;
  border-radius: 4px;
  padding: 15px;
  margin-bottom: 15px;
}

/* Stack poll content vertically */
#poll-container form {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: flex-start;
  text-align: left;
}

/* Flag background vote button */
#poll-container .button-flag {
  background-image: url('australian_flag.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  border: 1px solid white;
  border-radius: 4px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  padding: 0 12px;
  box-sizing: border-box;
  color: white;
  font-size: 16px;
  font-weight: bold;
}

#poll-container form {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  text-align: center;
}
#poll-container h3 {
  margin-top: 0;
}
#poll-container button {
  margin-top: 12px;
}

/* Align anonymous tips title to the right on desktop */
@media (min-width: 769px) {
  .footer-section.right h3 {
    text-align: center;
    width: 100%;
  }
}

.left-section a {
  display: inline-block;
}
.left-section a:focus {
  outline: none;
}
.footer-section a:focus {
  outline: none;
}

/* Use Roboto for headline descriptions */
.headline-description {
  font-family: 'Roboto', sans-serif;
  font-size: 16px;
  line-height: 1.4;
}
.two-columns-below a,
.right-column a,
.main-headline-link {
  text-transform: uppercase;
}

/* Make headlines uppercase and Anton */
.two-columns-below a,
.right-column a,
.main-headline-link {
  text-transform: uppercase;
  font-family: 'Oswald', sans-serif;
}

/* Make all header text uppercase and Anton */
.banner {
  font-family: 'Oswald', sans-serif;
  padding: 0;
  margin: 0;
}
.banner a,
.banner .icons-subsection {
  text-transform: uppercase;
}

/* Make all footer text uppercase and Anton */
.footer-wrapper,
.footer-wrapper * {
  text-transform: uppercase;
  font-family: 'Oswald', sans-serif;
}

/* Poll text styling */
#poll-container,
#poll-container * {
  font-family: 'Oswald', sans-serif;
  text-transform: uppercase;
  font-weight: normal;
}

/* Remove underline from column headlines */
.two-columns-below a,
.right-column a {
  text-decoration: none;
}

/* Limit footer flag image width on desktop */
@media (min-width: 769px) {
  .footer-section.left img {
    max-width: 100px;
    width: 100%;
  }
}
.footer-section.left p {
  text-transform: none;
}
.footer-section.center p {
  text-transform: none;
}

/* Make headlines gold on hover */
.two-columns-below a:hover,
.right-column a:hover {
  color: gold !important;
}

.main-headline-link {
  font-size: 32px;
  font-weight: bold;
}
.two-columns-below {
  margin-top: 15px;
}

/* Button styling */
.button-flag {
  background-image: url('australian_flag.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  border: 1px solid white;
  border-radius: 4px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 32px;
  padding: 0 12px;
  box-sizing: border-box;
  color: white;
  font-size: 16px;
  font-weight: bold;
  text-transform: uppercase;
  text-shadow:
    -1px -1px 0 #1e1e1e,
     1px -1px 0 #1e1e1e,
    -1px  1px 0 #1e1e1e,
     1px  1px 0 #1e1e1e;
}

.footer-section.right button.button-flag {
  width: auto;
}
.footer-section.right form {
  align-items: center;
}
.footer-section.right button.button-flag {
  width: auto;
}

#search-results > div {
  border-bottom: 1px solid #444;
  padding: 10px 0;
  text-align: left;
}
#search-results a {
  color: white;
  text-decoration: none;
  font-family: 'Oswald', sans-serif;
  font-size: 21px;
}
#search-results a:hover {
  color: gold;
}
#search-results div {
  font-family: 'Roboto', sans-serif;
}

/* Restore search input and button consistent font and uppercase */
.center-section input[type="text"],
.center-section button {
  font-family: 'Oswald', sans-serif !important;
  text-transform: uppercase !important;
  font-size: 16px !important;
}


html, body {
  font-size: 16px;
}
.headline-meta {
  font-family: 'Roboto', sans-serif;
  font-size: 16px;
  color: #ccc;
}
.two-columns-below a,
.right-column a {
  font-size: 21px;
}

/* Justify all column text */
.two-columns-below .headline-item > div,
.right-column .headline-item > div {
  text-align: justify;
}
.two-columns-below .headline-item a,
.right-column .headline-item a {
  display: block;
}
.headline-description {
  display: block;
  margin-top: 6px;
  text-align: justify;
  hyphens: auto;
}
.two-columns-below img,
.right-column img {
  width: 33%;
  aspect-ratio: 16/9;
  object-fit: cover;
  flex-shrink: 0;
}

@media (max-width: 768px) {
  .two-columns-below {
    grid-template-columns: 1fr;
    gap: 20px;
  }
}

.ticker-group {
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  white-space: nowrap;
  margin-right: 50px;
}
.ticker-group > * {
  margin-right: 20px;
}
.ticker-separator {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 0px;
  flex: 0 0 auto;
}
.ticker-separator img {
  height: 16px;
  width: auto;
  display: block;
}
.ticker-group a {
  font-family: 'Oswald', sans-serif;
  font-size: 16px;
  color: white;
  text-transform: uppercase;
  text-decoration: none;
}
.ticker-group a:hover {
  color: gold;
}
.ticker-extra {
  font-family: 'Oswald', sans-serif;
  font-size: 16px;
  color: white;
  text-transform: uppercase;
  text-decoration: none;
}
.ticker-extra:hover {
  color: gold;
  cursor: default;
}

.ticker-track {
  display: flex;
  flex-wrap: nowrap;
  white-space: nowrap;
  will-change: transform;
  animation: ticker-scroll var(--ticker-duration) linear infinite;
}

@keyframes ticker-scroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(calc(-1 * var(--ticker-distance)));
  }
}

.ticker-inner:hover .ticker-track {
  animation-play-state: paused;
}

/* Force ticker group to never shrink or wrap */
.ticker-group {
  display: flex;
  align-items: center;
  flex: 0 0 auto;
  white-space: nowrap;
  margin-right: 50px;
}

.ticker-track > * {
  margin: 0;
}

  



  
.header-top {
  width: 100%;
  background: #1e1e1e;
  text-align: center;
  z-index: 1100;
}

.header-time {
  padding: 0px 0;
  font-family: 'Roboto', sans-serif;
  font-size: 16px;
  color: white;
}

.header-time strong {
  font-weight: bold;
}

.header-separator {
  border-top: 1px solid #444;
  width: 100%;
}

.header-logo {
  padding: 10px 0 0px;
}

.header-logo img {
  display: block;
  height: 53px;
  width: auto;
  display: inline-block;
  margin: 0;
  padding: 0;
}





.footer-social {
  width: 100%;
  padding: 20px 0;
  text-align: center;
  background: #1e1e1e;
}

.footer-social .social-icons {
  display: inline-flex;
  gap: 12px;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
}

.footer-social .social-icons img {
  height: 24px;
  width: auto;
  display: block;
  transition: opacity 0.3s ease;
}

.footer-social .social-icons img:hover {
  opacity: 0.7;
}

.ticker-inner {
  width: 100%;
   background: #1e1e1e;
    display: flex;
  align-items: center;
  height: 16px;
  overflow: hidden;
}


 .header-fixed {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 999;
  background: #1e1e1e;
   box-shadow: 0 2px 4px rgba(0,0,0,0.4);
}


.search-wrapper {
  display: flex;
  align-items: center;
  gap: 0px;
  transition: all 0.3s ease;
}






/* Search icon styling */
.search-wrapper button {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  padding: 0;
}

.search-wrapper img {
  height: 16px; /* adjust as needed */
  width: 16px;
  display: block;
}










.banner-content {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  max-width: 1248px;
  margin: 0 auto;
  padding: 8px 0 0;
  box-sizing: border-box;
}





#search-container {
  position: relative;
  display: none;
  flex-direction: column;
  max-width: 1248px;
  margin: 0 auto;
  width: 100%;
  padding: 0 16px;
  box-sizing: border-box;
}



#search-close {
  display: none; /* Hidden by default */
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
  padding: 16px 0px;
  line-height: 1;
  transition: color 0.2s ease;
  margin-left: auto; /* Pushes it to the right inside flex container */
}
#search-close:hover {
  color: gold;
}


@media (max-width: 768px) {
  .header-time {
    display: none;
  }
  .banner-content {
    padding-top: 0px;
  }
}

  #search-container {
  display: none;
  flex-direction: column;
}

.main-headline-wrapper {
  padding-top: 16px; /* Adjust this value as needed */
  max-width: 1248px;
  margin: 0 auto;
}

  .header-top-combined {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  width: 100%;
  max-width: 1248px;
  margin: 0 auto;
  padding: 12px 16px;
  box-sizing: border-box;
  background: #1e1e1e;
}

.header-time {
  flex: 0 0 auto;
}

.ticker-inner {
  flex: 1 1 auto;
  overflow: hidden;
  border-left: 1px solid #444;
  border-right: 1px solid #444;
  height: 16px;
  display: flex;
  align-items: center;
}




.search-wrapper form {
  display: flex;
  flex-basis: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
  transition: flex-basis 0.3s ease, opacity 0.3s ease;
margin-left: 16px;
}

.search-wrapper form.active {
  flex-basis: 220px; /* adjust width as needed */
  opacity: 1;
  pointer-events: auto;
}

.search-wrapper button {
  flex: 0 0 auto;
  width: 16px;
  height: 16px;
  justify-content: center;
}

.header-logo a {
  display: inline-block;
  line-height: 0;
  text-transform: none; /* remove uppercase from link */
}
.header-logo img {
  display: block;
}

 .banner-content {
  align-items: flex-end;
}

.header-logo {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  width: 100%;
}


.banner {
  transition: all 1.0s ease;
}

.banner.collapsed {
  height: 0;
  opacity: 0;
  overflow: hidden;
  padding: 0;
}


.sun-icon {
  width: 24px; /* or whatever you prefer */
  height: auto;
  aspect-ratio: 634 / 318;
  object-fit: contain;
  display: block;
  flex-shrink: 0; /* üëà this is crucial */
}






/* Hide sun icon by default everywhere */
.sun-link {
  display: none;
}

/* Show sun icon when banner is collapsed (all screen sizes) */
.banner.collapsed ~ .header-top-combined .sun-link {
  display: inline-flex;
}

/* Hide date text on mobile always */
@media (max-width: 768px) {
  .header-time #top-time-line {
    display: none;
  }
}


.banner-date {
  width: 100%;
  text-align: center;
  font-size: 12px;
  font-family: 'Roboto', sans-serif;
  color: white;
  padding-top: 0px;
  padding-bottom: 0px;
}

@media (max-width: 768px) {
  .banner-date {
    display: none;
    paddting-top: 0px;
  }
}


#search-form.active {
  display: flex; /* or block */
}
#search-input {
  height: 16px;
  line-height: 16px;
  font-size: 11px;
  padding: 0 4px;
  border: none;
  box-sizing: border-box;
}
#search-form {
  height: auto;
  padding: 0;
  margin: 0;
  display: flex;
  align-items: center;
}
.search-wrapper {
  height: auto;
  padding: 0;
}
#search-input {
  padding-top: 0;
  padding-bottom: 0;
  margin-top: 0;
  margin-bottom: 0;
  border-width: 0;
}
#search-form {
  margin-left: 6px; /* üëà apply spacing manually */
}
.search-wrapper button,
#search-form {
  display: flex;
  align-items: center;
}
#search-form {
  display: none;
}
  
</style>
</head>
<body>
  <div class="header-fixed">
    <div class="banner">
      <div class="banner-content">
        <div class="banner-date">
          <span id="top-time-line">Mon, 07 Jul 2025</span>
        </div>
        <div class="header-logo">
          <a href="https://fedsun.news">
            <img src="fedsun_logo_hoz.png" alt="Logo" class="logo" />
          </a>
        </div>
      </div>
    </div>

    <div class="header-top-combined">
      <a href="https://fedsun.news/" class="sun-link">
        <img src="sun.png" alt="Home" class="sun-icon" />
      </a>
      <div class="ticker-inner" id="ticker-inner">
        <div class="ticker-track" id="ticker-track">Loading headlines‚Ä¶</div>
      </div>
      <div class="search-wrapper">
        <button id="search-toggle" aria-label="Search">
          <img src="icon_search.png" alt="Search Icon">
        </button>
        <form id="search-form" autocomplete="off">
          <input type="text" id="search-input" placeholder="Search fedsun.news...">
        </form>
      </div>
    </div>
  </div>

  <div id="header-spacer"></div>

  <div class="container">
    <div id="search-container">
      <button id="search-close" aria-label="Close Search Results">‚úï</button>
      <div id="search-filters"></div>
      <div id="search-results"></div>
      <div id="search-pagination"></div>
    </div>
  </div>
<h1 style="text-align:center; margin: 40px 0 20px; font-family: 'Oswald', sans-serif; font-size: 28px; text-transform: uppercase;">
  Archived Headlines
</h1>
  <div class="main-headline-wrapper">
    <div class="main-headline-layout">
      <div class="main-headline-left">
        <div class="two-columns-below">
          <div class="column" id="archive-col-1"></div>
          <div class="column" id="archive-col-2"></div>
        </div>
      </div>
      <div class="right-column" id="archive-col-3"></div>
    </div>

    <div style="text-align:center; margin: 30px 0;">
      <a href="/" style="color:white; text-decoration:none; font-size:18px;" onmouseover="this.style.color='gold'" onmouseout="this.style.color='white'">‚Üê Back to Homepage</a>
    </div>

    <div id="archive-pagination" style="text-align:center; margin-bottom:40px;"></div>
  </div>
  <hr class="footer-separator" />
  <div class="footer-social">
    <div class="social-icons">
      <a href="https://gab.com/federationsun" target="_blank"><img src="icon_gab.png" alt="Gab"></a>
      <a href="https://www.facebook.com/people/Federation-Sun/61577319796033/" target="_blank"><img src="icon_facebook.png" alt="Facebook"></a>
      <a href="https://www.instagram.com/fedsun.news/" target="_blank"><img src="icon_instagram.png" alt="Instagram"></a>
      <a href="https://fedsun.news/feed.xml" target="_blank"><img src="icon_rss.png" alt="RSS"></a>
      <a href="https://t.me/federationsun" target="_blank"><img src="icon_telegram.png" alt="Telegram"></a>
      <a href="https://x.com/federationsun" target="_blank"><img src="icon_x.png" alt="X"></a>
      <a href="https://www.youtube.com/channel/UCe8DBHr28mOCBxtZuxzJ7_A" target="_blank"><img src="icon_youtube.png" alt="YouTube"></a>
    </div>
  </div>
  <footer>
    <div class="footer-wrapper">
      <div class="footer-content">
        <div class="footer-section left">
          <img src="australian_flag.png" alt="Australian Flag" />
          <p>The Federation Sun proudly honours the European Australians who built this nation‚Äîtaming the land, founding our cities, and instilling the traditions and institutions of Western civilisation that shaped Australia.</p>
        </div>
        <div class="footer-section center">
          <a href="https://fedsun.news"><img src="fedsun__logo_footer.png" alt="Federation Sun Logo" /></a>
          <p>Contact:<br />editor@fedsun.news</p>
          <p>The Federation Sun ¬© 2025</p>
        </div>
        <div class="footer-section right">
          <h3>SEND NEWS TIPS</h3>
          <form action="https://formspree.io/f/meokpdkj" method="POST">
            <textarea name="tip" placeholder="Type your tip here..."></textarea>
            <input type="hidden" name="_redirect" value="https://fedsun.news/thanks.html" />
            <button type="submit" class="button-flag">Send tip</button>
          </form>
        </div>
      </div>
    </div>
  </footer>

  <script>
    function updateTime() {
      const now = new Date();
      const day = new Intl.DateTimeFormat('en-AU', { timeZone: 'Australia/Melbourne', weekday: 'long' }).format(now);
      const date = new Intl.DateTimeFormat('en-AU', { timeZone: 'Australia/Melbourne', day: '2-digit', month: 'short', year: 'numeric' }).format(now);
      const timeLine = document.getElementById('top-time-line');
      if (timeLine) timeLine.textContent = `${day}, ${date}`;
    }
    updateTime();
    setInterval(updateTime, 60000);

    Promise.all([
      fetch('/data/headlines.json?' + new Date().getTime()).then(r => r.json()),
      fetch('/data/ticker_extra.json?' + new Date().getTime()).then(r => r.json())
    ])
    .then(([headlines, extras]) => {
      const sorted = headlines.sort((a, b) => new Date(b.date) - new Date(a.date));
      const archive = sorted.slice(12);

      // Ticker
      const track = document.getElementById('ticker-track');
      function createTickerGroup(extras, headlines) {
        const grp = document.createElement('div');
        grp.className = 'ticker-group';
        [...extras, ...headlines.slice(0, 6)].forEach(item => {
          const sep = document.createElement('div');
          sep.className = 'ticker-separator';
          sep.innerHTML = '<img src="/flag_au1.png" alt="AU Flag">';
          grp.appendChild(sep);
          const span = document.createElement(item.url ? 'a' : 'span');
          span.textContent = item.text || item.title;
          span.href = item.url || '#';
          span.className = item.url ? 'ticker-link' : 'ticker-extra';
          grp.appendChild(span);
        });
        return grp;
      }
      const group = createTickerGroup(extras, archive);
      track.innerHTML = '';
      for (let i = 0; i < 4; i++) track.appendChild(group.cloneNode(true));
      const dist = track.scrollWidth / 2;
      const speedPxPerSec = 30;
      document.documentElement.style.setProperty('--ticker-distance', dist + 'px');
      document.documentElement.style.setProperty('--ticker-duration', (dist / speedPxPerSec) + 's');

      // Archive Columns + Pagination
      const perPage = 15;
      let currentPage = 1;

      function renderArchivePage(page) {
        const start = (page - 1) * perPage;
        const end = start + perPage;
        const pageItems = archive.slice(start, end);
        const cols = [document.getElementById('archive-col-1'), document.getElementById('archive-col-2'), document.getElementById('archive-col-3')];
        cols.forEach(c => c.innerHTML = '');
        pageItems.forEach((item, i) => cols[i % 3].appendChild(createHeadlineItem(item)));

        const pagination = document.getElementById('archive-pagination');
        const totalPages = Math.ceil(archive.length / perPage);
        pagination.innerHTML = '';
        for (let i = 1; i <= totalPages; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          btn.style.margin = '0 4px';
          btn.style.padding = '6px 12px';
          btn.style.background = i === page ? 'gold' : '#333';
          btn.style.color = 'white';
          btn.style.border = '1px solid #555';
          btn.style.cursor = 'pointer';
          btn.addEventListener('click', () => renderArchivePage(i));
          pagination.appendChild(btn);
        }
      }

      function formatDateAEST(dateStr) {
        const d = new Date(dateStr);
        return `${String(d.getDate()).padStart(2, '0')}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getFullYear()).slice(-2)}`;
      }

      function createHeadlineItem(item) {
        const wrapper = document.createElement('div');
        wrapper.className = 'headline-item';
        const img = document.createElement('img');
        img.src = item.image;
        img.alt = item.title;
        img.style.width = '33%';
        img.style.aspectRatio = '16/9';
        img.style.objectFit = 'cover';
        img.style.flexShrink = '0';
        const content = document.createElement('div');
        content.style.flex = '1';
        content.style.textAlign = 'left';
        const link = document.createElement('a');
        link.href = item.url;
        link.textContent = item.title;
        link.style.color = 'white';
        link.style.display = 'block';
        link.style.marginBottom = '4px';
        const meta = document.createElement('div');
        meta.className = 'headline-meta';
        meta.textContent = `${formatDateAEST(item.date)}${item.author ? ' ‚Äî ' + item.author : ''}`;
        content.appendChild(link);
        content.appendChild(meta);
        const inner = document.createElement('div');
        inner.className = 'headline-description';
        inner.textContent = item.description || '';
        const container = document.createElement('div');
        const row = document.createElement('div');
        row.style.display = 'flex';
        row.style.gap = '10px';
        row.appendChild(img);
        row.appendChild(content);
        container.appendChild(row);
        container.appendChild(inner);
        return container;
      }

      renderArchivePage(currentPage);
    })
    .catch(e => console.error('Error loading archive:', e));
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const spacer = document.getElementById("header-spacer");
      const headerFixed = document.querySelector(".header-fixed");
      if (headerFixed && spacer) spacer.style.height = headerFixed.offsetHeight + "px";
    });
    window.addEventListener("scroll", function() {
      const banner = document.querySelector(".banner");
      if (!banner) return;
      banner.classList.toggle("collapsed", window.scrollY > 50);
    });
    document.getElementById("search-toggle").addEventListener("click", function() {
      const form = document.getElementById("search-form");
      form.classList.toggle("active");
      if (form.classList.contains("active")) setTimeout(() => document.getElementById("search-input").focus(), 300);
    });
    document.getElementById("search-close").addEventListener("click", function() {
      document.getElementById("search-filters").innerHTML = "";
      document.getElementById("search-results").innerHTML = "";
      document.getElementById("search-pagination").innerHTML = "";
      document.getElementById("search-container").style.display = "none";
      this.style.display = "none";
    });
  </script>
</body>
</html>
